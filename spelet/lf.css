:root{
    --bg: #0b0f14;
    --panel: #121824;
    --panel-2: #0f1520;
    --text: #e6eaf2;
    --muted: #a7b0c3;
    --accent: #64b5ff;
    --accent-2: #ff6b6b;
    --ring: #89b4ff55;
    --ok: #4cd97b;
    --warn: #ffcc66;
    --shadow: 0 10px 30px rgba(0,0,0,.35);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
    margin:0;
    font-family: Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    background: radial-gradient(1000px 600px at 20% 0%, #0e1625 0%, var(--bg) 60%);
    color: var(--text);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}

.container{ width:min(1020px,92vw); margin-inline:auto; }
header{ padding:32px 0 8px }
h1{ font-size: clamp(1.6rem, 1.1rem + 2vw, 2.2rem); margin:0; letter-spacing:-0.02em; }
.sub{ margin:6px 0 0; color:var(--muted) }

main{ padding: 16px 0 32px; }

.panel{
    background: linear-gradient(180deg, var(--panel) 0%, var(--panel-2) 100%);
    border: 1px solid #1d2636;
    border-radius: 16px;
    padding: 16px;
    box-shadow: var(--shadow);
}

.panel-sub{
    margin-top:14px;
    background: #0d1422;
    border: 1px solid #1f2a3d;
    border-radius: 12px;
    padding: 12px;
}

.players{
    display:grid;
    grid-template-columns: 1fr auto 1fr;
    align-items:center;
    gap:12px;
    margin-bottom:12px;
}

.player{
    display:flex;
    align-items:center;
    gap:10px;
    padding:8px;
    border-radius:12px;
    border:1px solid #1f2a3d;
    background:#0d1422;
    transition: box-shadow .2s ease, transform .12s ease;
}
.player.active{ box-shadow: 0 0 0 3px var(--ring); transform: translateY(-1px); }
.avatar{
    width:40px;height:40px;border-radius:999px;
    display:grid;place-items:center;font-weight:800;
    border:1px solid #27344e;background:#0f1726;
}
.avatar.x{ color: var(--accent) }
.avatar.o{ color: var(--accent-2) }
.meta .name{ font-weight:700 }
.meta .submeta{ color:var(--muted); font-size:.9rem }

.turn-timer{
    width:min(320px, 60vw);
    height:8px;
    border-radius:999px;
    background:#0d1422;
    border:1px solid #1f2a3d;
    overflow:hidden;
}
.turn-timer .bar{
    height:100%;
    width:100%;
    background: linear-gradient(90deg, var(--ok), var(--warn));
    transform-origin:left center;
}

.status-row{
    display:flex; align-items:center; justify-content:space-between; gap:12px; margin-top:10px; margin-bottom:8px;
}
#status{ font-weight:600; font-size:1.05rem; min-height:1.5em; }
.pill{
    display:inline-flex; align-items:center; gap:.4ch; padding:6px 10px; border-radius:999px;
    background:#0d1422; border:1px solid #1f2a3d; color:var(--muted); font-weight:600;
}

.board{
    --size: clamp(260px, 64vw, 460px);
    position:relative;
    display:grid;
    grid-template-columns: repeat(3, 1fr);
    aspect-ratio: 1/1;
    width: var(--size);
    gap:10px;
    margin:14px auto 8px;
    background:#0d1422;
    border-radius:14px;
    padding:10px;
    border:1px solid #1f2a3d;
}

.cell{
    position:relative;
    display:grid;
    place-items:center;
    font-weight:800;
    font-size: clamp(2.4rem, 8vw, 4rem);
    line-height:1;
    border-radius:12px;
    background:#0f1726;
    border:1px solid #27344e;
    color:var(--text);
    cursor:pointer;
    transition: transform .08s ease, box-shadow .15s ease, border-color .2s ease, background .2s ease;
    user-select:none;
    -webkit-tap-highlight-color: transparent;
    outline: none;
}
.cell:hover{ transform: translateY(-1px) }
.cell:active{ transform: translateY(0) scale(.99) }
.cell:focus-visible{ box-shadow: 0 0 0 4px var(--ring) }

.cell.x{ color: var(--accent) }
.cell.o{ color: var(--accent-2) }

/* Hover-spöke som visar nästkommande symbol */
.cell.empty::after{
    content: attr(data-ghost);
    position:absolute; inset:0;
    display:grid; place-items:center;
    opacity:.16;
    pointer-events:none;
    font-weight:800;
    transform: scale(.96);
}

.cell.placed{ animation: pop .18s ease-out; }
@keyframes pop{
    0%{ transform: scale(.7); opacity:.3 }
    100%{ transform: scale(1); opacity:1 }
}

/* Senaste drag */
.cell.last{
    box-shadow: 0 0 0 3px #ffffff20, 0 0 0 6px #ffffff10 inset;
}

.win-line{
    position:absolute;
    inset:10px;
    pointer-events:none;
    border-radius:12px;
    opacity:0;
    transform: scaleX(0);
    transform-origin:left center;
    height:calc(33.333% - 10px);
    background: linear-gradient(90deg, rgba(255,255,255,.0) 0%, rgba(255,255,255,.9) 20%, rgba(255,255,255,.9) 80%, rgba(255,255,255,.0) 100%);
    mix-blend-mode:overlay;
    transition: opacity .2s ease, transform .35s ease;
}

/* Effekt-canvas för konfetti */
.fx{
    position:absolute; inset:0; pointer-events:none;
}

.help{ color:var(--muted); margin-top:8px }

.controls{ margin-top:12px; display:flex; gap:10px; flex-wrap:wrap; }
.btn{
    appearance:none; border:none; border-radius:10px; padding:10px 14px;
    background: linear-gradient(180deg, #1c2a44 0%, #162237 100%);
    color:#e8f0ff; font-weight:600; cursor:pointer; border:1px solid #2a3b5f;
    transition: transform .08s ease, box-shadow .15s ease, background .2s ease;
}
.btn:hover{ transform: translateY(-1px) }
.btn:active{ transform: translateY(0) scale(.99) }
.btn:focus-visible{ box-shadow: 0 0 0 4px var(--ring) }
.btn.btn-secondary{ background: linear-gradient(180deg, #2a2f3a 0%, #232832 100%); color:#d7deea; border-color:#3b4250; }

.moves{ margin-top:14px }
.moves-head{ font-weight:700; margin-bottom:6px }
.moves-list{
    margin:0; padding-left:20px; max-height:150px; overflow:auto;
    scrollbar-width: thin; scrollbar-color: #33415c transparent;
}
.footer{ padding: 8px 0 40px; color:var(--muted); text-align:center; }

.visually-hidden{
    position:absolute !important;
    height:1px;width:1px; overflow:hidden;
    clip: rect(1px, 1px, 1px, 1px);
    white-space:nowrap; border:0;padding:0;margin:-1px;
}

